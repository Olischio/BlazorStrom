@page "/turbine/{id}/{capacityusage:double}"
@inject HttpClient Http


<h3>Change Turbine Settings</h3>
<p>@Id</p>



<EditForm Model="@exampleModel" OnValidSubmit="@HandleValidSubmit">
    <DataAnnotationsValidator />
    <ValidationSummary />

    <InputNumber id="name" @bind-Value="exampleModel.CapacityUsage" />

    

    <button class="btn btn-primary" type="submit">Submit</button>
</EditForm>




@code {
    [Parameter]
    public string? Id { get; set; }

    [Parameter]
    public double CapacityUsage { get; set; }

    public TurbinesPage.Turbine exampleModel { get; set; } = new TurbinesPage.Turbine();

    protected override void OnInitialized()
    {

    }

    protected override void OnParametersSet()
    {
        base.OnParametersSet();

        exampleModel = new TurbinesPage.Turbine();
        exampleModel.Id = Id;
        exampleModel.CapacityUsage = CapacityUsage;

    }

    private async Task  HandleValidSubmit()
    {

        await this.Http.PutAsync($"/api/Turbines/{this.exampleModel.Id}?capacityUsage={this.exampleModel.CapacityUsage}",null);

    }

}
